<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Festivals - Overzicht</title>
    <link rel="stylesheet" th:href="@{/css/base.css}"/>
    <link rel="stylesheet" th:href="@{/css/festivals.css}"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>

<div th:replace="~{/navbar}"></div>

<!-- Main Content -->
<div class="main-container">
    <!-- Page Header -->
    <div class="page-header">
        <h1 class="page-title" th:text="#{festival.overview.title}" />
        <p class="page-subtitle" th:text="#{festival.overview.subtitle}" />
    </div>

    <div th:if="${userRole == 'admin'}" class="add-festival-button">
        <button class="btn-add-festival" title="Festival toevoegen"
                th:title="#{festival.add.button.title}"
                onclick="window.location.href='/festivals/add'">+</button>
    </div>

    <!-- Festivals Card -->
    <div class="festivals-card">
        <div th:if="${festivals != null}">
            <table class="festivals-table">
                <thead>
                <tr>
                    <th scope="col" th:text="#{festival.table.header.name}" />
                    <th scope="col" th:text="#{festival.table.header.location}" />
                    <th scope="col" th:text="#{festival.table.header.category}" />
                    <th scope="col" th:text="#{festival.table.header.datetime}" />
                    <th scope="col" th:text="#{festival.table.header.tickets}" />
                    <th scope="col" th:text="#{festival.table.header.price}" />
                    <th scope="col" th:text="#{festival.table.header.action}" />
                </tr>
                </thead>
                <tbody>
                <tr th:each="festival : ${festivals}" th:with="datePattern=#{date.format.pattern}">
                    <td data-label="Festival">
                        <span class="festival-name" th:text="${festival.name}"></span>
                    </td>
                    <td data-label="Locatie">
                        <span class="festival-location" th:text="${festival.location}"></span>
                    </td>
                    <td data-label="Categorie">
                        <span class="category-badge" th:text="${festival.categorie}"></span>
                    </td>
                    <td data-label="Datum & Tijd">
                        <span class="festival-datetime" th:text="${#temporals.format(festival.dateTime, datePattern)}"></span>
                    </td>
                    <td data-label="Tickets">
                        <span class="tickets-available"
                              th:classappend="${festival.availableTickets < 20} ? 'tickets-sold-out' : (${festival.availableTickets < 10} ? 'tickets-sold-out')"
                              th:text="${festival.availableTickets}"></span>
                    </td>
                    <td data-label="Prijs">
                        <span th:if="${festival.price != null}"
                              class="festival-price"
                              th:text="${' ‚Ç¨' + festival.price}">‚Ç¨ -</span>
                        <span th:unless="${festival.price != null}"
                              class="price-unavailable">Niet beschikbaar</span>
                    </td>
                    <td data-label="Details">
                        <div class="action-buttons">
                            <a th:href="@{/festivals/{id}(id=${festival.id})}"
                               class="btn-details"
                               th:attr="aria-label=#{festival.details.aria} + ' ' + ${festival.name}"
                               th:text="#{festival.details}">
                            </a>
                            <a th:if="${userRole == 'admin'}"
                               th:href="@{/festivals/edit/{id}(id=${festival.id})}"
                               class="btn-edit"
                               th:attr="aria-label=#{festival.edit.aria} + ' ' + ${festival.name}"
                               th:title="#{festival.edit.title}">
                                ‚úèÔ∏è
                            </a>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>

        <!-- Empty State -->
        <div th:if="${festivals.isEmpty()}" class="empty-state">
            <div class="empty-state-icon">üöö</div>
            <h2 class="empty-state-title" th:text="#{festival.empty.title}" />
            <p class="empty-state-message" th:text="#{festival.empty.message}" />
        </div>
    </div>
</div>

</body>
</html>
